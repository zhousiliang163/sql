--不良处理
select t.*,rowid from t_supplier_bad_manage t where t.managecode='20140317022700058';

--不良处理和供应商关系表
select * from t_supplier_bad_ralation t;

declare
count_num number(10):=0;
begin
   for p in (select *  from t_supplier_bad_manage t where not exists (select 1 from  p_sys_processinstance ps where ps.resouceid=t.managecode)) loop
	    delete from t_supplier_bad_manage t where t.managecode=p.managecode;
      delete from t_supplier_bad_ralation t where t.managecode=p.managecode;
     count_num:=count_num+1;
  end loop;

  dbms_output.put_line('删除总数：'||count_num);
end;
